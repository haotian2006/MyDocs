---
import { getCollection } from "astro:content";

import Layout from "@/layouts/base.astro";
import { getAuthorOrDefault } from "@/modules/author";

// Fetch all documents from the 'tags' collection
const tags = await getCollection("tags");

---

<Layout class="px-72">
    <main class="flex h-screen w-full flex-col items-center justify-start gap-6 py-10">
        <!-- Adjust the padding, flex properties, and spacing as needed -->
        {
            tags.map(async doc => (
                <div class="box-border flex w-4/5 flex-col gap-2 rounded-xl p-4 shadow-lg outline outline-2 transition-transform duration-300 hover:-translate-y-1 hover:cursor-pointer">
                    <a href={`/RbxDocs/tags/${doc.slug}`}>
                        <div class="flex flex-col">
                            <span class="flex items-center text-sm italic">
                                <img
                                    src={(await getAuthorOrDefault(doc.data.author)).pfp}
                                    class="mr-2 h-6 w-6 rounded-full"
                                />
                                {(await getAuthorOrDefault(doc.data.author)).username}
                            </span>
                            <p class="text-lg font-bold">{doc.data.title}</p>
                        </div>

                        <p class="line-clamp-2 overflow-ellipsis text-sm">
                            {doc.body.length > 350 ? doc.body.slice(0, 350) + "..." : doc.body}
                        </p>
                    </a>
                </div>
            ))
        }
    </main>
</Layout>

<!-- <Layout class="px-72 py-8">
    <ul class="space-y-4">
        {
            tags.map(async doc => (
                <li>
                    <a href={`/RbxDocs/tags/${doc.slug}`}>
                        <b style="color:#0096FF">{doc.data.title}</b>
                        <a style="font-size:90%;color:rgb(109, 109, 109,.6);">
                            by {(await getAuthorOrDefault(doc.data.author)).username}
                        </a>
                        <p
                            style={{
                                whiteSpace: "normal",
                                wordWrap: "break-word",
                                overflowWrap: "break-word",
                                maxWidth: "800px",
                            }}
                        >
                            {doc.body.length > 200 ? doc.body.slice(0, 200) + "..." : doc.body}
                        </p>
                    </a>
                </li>
            ))
        }
    </ul>
</Layout> -->
