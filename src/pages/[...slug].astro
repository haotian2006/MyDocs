---
import { getCollection } from "astro:content";

import Layout from "@/layouts/base.astro";
import { sys } from "typescript";

export async function getStaticPaths() {
    const documents = await getCollection("documents");
    const tags = await getCollection("tags");

    const documentPaths = documents.map(entry => ({
    params: {
      slug: entry.slug === 'index' ? '/' : entry.slug,
    },
    props: {
      entry,
    },
  }));


  const tagPaths = tags.map(entry => ({
    params: {
      slug: `tags/${entry.slug}`,
    },

    props: {
       entry:{
         ...entry,
        slug: `tags/${entry.slug}`
       }
    },

    
    
  }));
  
//   console.log("logging")
//   console.log(tagPaths[0]);
//   console.log(documents[0]);

  return [ ...tagPaths,...documentPaths];
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout class="flex justify-center py-12">
    <main
        class={`
            prose
            marker:text-base-content
            prose-headings:font-light prose-headings:text-base-content
            prose-h2:mt-0
            prose-p:text-base-content
            prose-a:text-blue-500 prose-a:decoration-inherit prose-a:underline-offset-1
            prose-a:visited:text-purple-500
        `}
    >
        <h1>{entry.data.title}</h1>

        <Content />
    </main>
</Layout>
